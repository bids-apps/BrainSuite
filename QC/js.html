
<script>
function transpose(a) {
    return Object.keys(a[0]).map(function(c) {
        return a.map(function(r) { return r[c]; });
    });
}

function makecsv(){
/* const rows = [values, reasons];
  let csvContent = "data:text/csv;charset=utf-8,"
   + rows.map(e => e.join(",")).join("\n");
*/
// var csvContent = values.join(",");
var reasons = [];
const textsReason = document.querySelectorAll('.exReason');
textsReason.forEach(( textR )=> {
        reasons.push(textR.value)
    });

var subIDs = [];
const textSubID = document.querySelectorAll("input[name='subID']");
textSubID.forEach(( textS )=> {
        subIDs.push(textS.value)
    });

var values = [];
const checkboxes = document.querySelectorAll(`input[name='subID']`);
checkboxes.forEach((checkbox) => {
        values.push(Number(checkbox.checked));
    });


subIDs.unshift('participant_id')
values.unshift('Exclude')
reasons.unshift('Note')
const rows = [subIDs, values, reasons];
rowsT = transpose(rows);
let csvContent = "data:text/csv;charset=utf-8,"
    + rowsT.map(e => e.join(",")).join("\n");

var encodedUri = encodeURI(csvContent);
var link = document.createElement("a");
link.setAttribute("href", encodedUri);
link.setAttribute("download", "BrainSuiteQC.csv");
document.body.appendChild(link); // Required for FF

link.click();
}


</script>
<p class="bottom-three">
   <button type="button" style="width:120px;height:60px;font-size : 30px;" id="save" onclick="makecsv();">Save</button>
</p>
